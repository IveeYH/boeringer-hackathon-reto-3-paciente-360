runtime: python312
runtime_config:
  operating_system: "ubuntu18"

entrypoint: streamlit run --server.port 8080 --server.address=0.0.0.0 --server.enableCORS=false --server.enableWebsocketCompression=false --server.enableXsrfProtection=false --server.headless=true  web/main.py

env: flex

instance_class: F2

env_variables:
  STREAMLIT_SERVER_PORT: 8080
  STREAMLIT_SERVER_HEADLESS: true
  GOOGLE_APPLICATION_CREDENTIALS: $GCP_CREDENTIALS_PATH
  POSTGRES_USER: $POSTGRES_USER
  POSTGRES_PASS: $POSTGRES_PASS

network:
  session_affinity: true